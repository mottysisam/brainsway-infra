var H=Object.defineProperty;var J=(s,t,c)=>t in s?H(s,t,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[t]=c;var C=(s,t,c)=>J(s,typeof t!="symbol"?t+"":t,c);import{r as d,a as K}from"./vendor-SIwY82C9.js";import{E as Y,G as Q,U as V,C as L,L as Z,X as $,a as _,F as ee,b as p,S as se,B as te,R as D,A as k}from"./icons-BWWBq4Ww.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function c(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=c(n);fetch(n.href,i)}})();var A={exports:{}},j={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var re=d,ae=Symbol.for("react.element"),ne=Symbol.for("react.fragment"),le=Object.prototype.hasOwnProperty,ce=re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ie={key:!0,ref:!0,__self:!0,__source:!0};function F(s,t,c){var o,n={},i=null,a=null;c!==void 0&&(i=""+c),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(o in t)le.call(t,o)&&!ie.hasOwnProperty(o)&&(n[o]=t[o]);if(s&&s.defaultProps)for(o in t=s.defaultProps,t)n[o]===void 0&&(n[o]=t[o]);return{$$typeof:ae,type:s,key:i,ref:a,props:n,_owner:ce.current}}j.Fragment=ne;j.jsx=F;j.jsxs=F;A.exports=j;var e=A.exports,T,E=K;T=E.createRoot,E.hydrateRoot;function O({report:s,onClick:t}){const c=r=>{switch(r){case"success":return"text-green-600 bg-green-50";case"failed":return"text-red-600 bg-red-50";case"running":return"text-yellow-600 bg-yellow-50";default:return"text-gray-600 bg-gray-50"}},o=r=>{switch(r){case"dev":return"bg-dev-100 text-dev-800";case"staging":return"bg-staging-100 text-staging-800";case"prod":return"bg-prod-100 text-prod-800";default:return"bg-gray-100 text-gray-800"}},n=r=>{switch(r){case"success":return e.jsx(_,{className:"w-4 h-4"});case"failed":return e.jsx($,{className:"w-4 h-4"});case"running":return e.jsx(Z,{className:"w-4 h-4 animate-spin"});default:return null}},i=r=>{if(!r)return"N/A";const m=Math.floor(r/60),h=r%60;return`${m}m ${h}s`},a=r=>new Date(r).toLocaleString();return e.jsxs("div",{className:`bg-white rounded-lg shadow-md p-6 border-l-4 border-${s.environment==="dev"?"dev":s.environment==="staging"?"staging":"prod"}-500 transition-all hover:shadow-lg hover:scale-[1.02] cursor-pointer`,onClick:t,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:`flex items-center space-x-2 px-3 py-1 rounded-full text-sm font-medium ${c(s.status)}`,children:[n(s.status),e.jsx("span",{className:"capitalize",children:s.status})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold uppercase tracking-wide rounded-md ${o(s.environment)}`,children:s.environment})]}),s.url&&e.jsx(Y,{className:"w-4 h-4 text-gray-400 hover:text-blue-500"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1 line-clamp-2",children:s.message}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Q,{className:"w-4 h-4"}),e.jsx("span",{className:"font-mono",children:s.commit})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{children:s.author})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{children:i(s.duration)})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 font-mono bg-gray-100 px-2 py-1 rounded",children:s.branch}),e.jsx("span",{className:"text-gray-500",children:a(s.timestamp)})]}),s.changes.length>0&&e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Changes:"}),e.jsx("div",{className:"flex space-x-3",children:["create","update","delete"].map(r=>{const m=s.changes.filter(h=>h.action===r).length;return m===0?null:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs rounded ${r==="create"?"bg-green-100 text-green-800":r==="update"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:["+",m," ",r]},r)})})]})})]})}function oe({filters:s,onFilterChange:t,onClearFilters:c}){const[o,n]=d.useState(""),i=r=>{r.preventDefault(),t({...s,branch:o})},a=Object.values(s).some(r=>r!==void 0&&r!=="");return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{className:"w-5 h-5 text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filters"})]}),a&&e.jsxs("button",{onClick:c,className:"flex items-center space-x-1 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(p,{className:"w-4 h-4"}),e.jsx("span",{children:"Clear All"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("form",{onSubmit:i,className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(se,{className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"text",value:o,onChange:r=>n(r.target.value),placeholder:"Search branches...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("select",{value:s.environment||"",onChange:r=>t({...s,environment:r.target.value}),className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Environments"}),e.jsx("option",{value:"dev",children:"Development"}),e.jsx("option",{value:"staging",children:"Staging"}),e.jsx("option",{value:"prod",children:"Production"})]}),e.jsxs("select",{value:s.status||"",onChange:r=>t({...s,status:r.target.value}),className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"success",children:"Success"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"running",children:"Running"})]}),e.jsx("input",{type:"text",value:s.author||"",onChange:r=>t({...s,author:r.target.value}),placeholder:"Filter by author...",className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]}),a&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.environment&&e.jsxs("span",{className:"inline-flex items-center space-x-1 px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-full",children:[e.jsxs("span",{children:["Environment: ",s.environment]}),e.jsx("button",{onClick:()=>t({...s,environment:void 0}),className:"hover:text-blue-900",children:e.jsx(p,{className:"w-3 h-3"})})]}),s.status&&e.jsxs("span",{className:"inline-flex items-center space-x-1 px-3 py-1 text-sm bg-green-100 text-green-800 rounded-full",children:[e.jsxs("span",{children:["Status: ",s.status]}),e.jsx("button",{onClick:()=>t({...s,status:void 0}),className:"hover:text-green-900",children:e.jsx(p,{className:"w-3 h-3"})})]}),s.author&&e.jsxs("span",{className:"inline-flex items-center space-x-1 px-3 py-1 text-sm bg-purple-100 text-purple-800 rounded-full",children:[e.jsxs("span",{children:["Author: ",s.author]}),e.jsx("button",{onClick:()=>t({...s,author:void 0}),className:"hover:text-purple-900",children:e.jsx(p,{className:"w-3 h-3"})})]}),s.branch&&e.jsxs("span",{className:"inline-flex items-center space-x-1 px-3 py-1 text-sm bg-orange-100 text-orange-800 rounded-full",children:[e.jsxs("span",{children:["Branch: ",s.branch]}),e.jsx("button",{onClick:()=>t({...s,branch:void 0}),className:"hover:text-orange-900",children:e.jsx(p,{className:"w-3 h-3"})})]})]})})]})}function de({stats:s}){const t=s.reduce((a,r)=>a+r.totalDeployments,0),c=s.length>0?s.reduce((a,r)=>a+r.successRate*r.totalDeployments,0)/t:0,o=s.length>0?s.reduce((a,r)=>a+r.averageDuration*r.totalDeployments,0)/t:0,n=a=>{const r=Math.floor(a/60),m=Math.round(a%60);return`${r}m ${m}s`},i=a=>`${Math.round(a*100)}%`;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Deployments"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(te,{className:"w-6 h-6 text-blue-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"text-sm text-gray-500",children:"Across all environments"})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Success Rate"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:i(c)})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(_,{className:"w-6 h-6 text-green-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"text-sm text-gray-500",children:"Overall success rate"})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Duration"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:n(o)})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(L,{className:"w-6 h-6 text-blue-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"text-sm text-gray-500",children:"Average deployment time"})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Failed"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:t-Math.round(c*t)})]}),e.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:e.jsx($,{className:"w-6 h-6 text-red-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"text-sm text-gray-500",children:[i(1-c)," failure rate"]})})]}),e.jsxs("div",{className:"md:col-span-2 lg:col-span-4 bg-white rounded-lg shadow-sm border p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Environment Breakdown"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:s.map(a=>e.jsxs("div",{className:"text-center p-4 rounded-lg bg-gray-50",children:[e.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium mb-2 ${a.environment==="dev"?"bg-dev-100 text-dev-800":a.environment==="staging"?"bg-staging-100 text-staging-800":"bg-prod-100 text-prod-800"}`,children:a.environment.toUpperCase()}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a.totalDeployments}),e.jsx("div",{className:"text-xs text-gray-500",children:"deployments"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-green-600",children:i(a.successRate)}),e.jsx("div",{className:"text-xs text-gray-500",children:"success rate"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-600",children:n(a.averageDuration)}),e.jsx("div",{className:"text-xs text-gray-500",children:"avg duration"})]}),a.lastDeployment&&e.jsx("div",{children:e.jsxs("div",{className:"text-xs text-gray-500",children:["Last: ",new Date(a.lastDeployment).toLocaleDateString()]})})]})]},a.environment))})]})]})}class v{static async getReports(t){try{return(await(await fetch(`${this.baseUrl}/reports/manifest.json`)).json()).reports||[]}catch(c){return console.error("Failed to fetch reports:",c),[]}}static async getReport(t){try{return await(await fetch(`${this.baseUrl}/reports/${t}.json`)).json()}catch(c){return console.error(`Failed to fetch report ${t}:`,c),null}}}C(v,"baseUrl","https://mottysisam.github.io/brainsway-infra");function xe(){const[s,t]=d.useState([]),[c,o]=d.useState([]),[n,i]=d.useState({}),[a,r]=d.useState([]),[m,h]=d.useState(!0),[y,N]=d.useState(null),[g,w]=d.useState(null),f=async()=>{try{h(!0),N(null);const l=await v.getReports();t(l),P(l)}catch(l){N("Failed to load deployment reports"),console.error("Error loading reports:",l)}finally{h(!1)}},P=l=>{const W=["dev","staging","prod"].map(R=>{const x=l.filter(u=>u.environment===R),X=x.filter(u=>u.status==="success").length,q=x.reduce((u,b)=>u+(b.duration||0),0),G=x.length>0?x.sort((u,b)=>new Date(b.timestamp).getTime()-new Date(u.timestamp).getTime())[0].timestamp:void 0;return{environment:R,totalDeployments:x.length,successRate:x.length>0?X/x.length:0,averageDuration:x.length>0?q/x.length:0,lastDeployment:G}});r(W)},B=async()=>{try{const l=await v.getReports(n);o(l)}catch(l){console.error("Error applying filters:",l),o(s)}},M=l=>{i(l)},U=()=>{i({})},I=l=>{w(l)},z=()=>{w(null)};return d.useEffect(()=>{f()},[]),d.useEffect(()=>{B()},[n,s]),m?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(D,{className:"w-8 h-8 animate-spin text-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading deployment reports..."})]})}):y?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(k,{className:"w-8 h-8 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-600 mb-4",children:y}),e.jsx("button",{onClick:f,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Try Again"})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Brainsway Infrastructure Portal"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Interactive deployment report dashboard for AWS infrastructure"})]}),e.jsxs("button",{onClick:f,className:"flex items-center space-x-2 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{children:"Refresh"})]})]})}),e.jsx(de,{stats:a}),e.jsx(oe,{filters:n,onFilterChange:M,onClearFilters:U}),e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Deployment Reports",e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",c.length," ",c.length===1?"result":"results",")"]})]})}),c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(k,{className:"w-12 h-12 mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No reports found"}),e.jsx("p",{className:"text-gray-600",children:Object.values(n).some(l=>l)?"Try adjusting your filters to see more results.":"No deployment reports are available yet."})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:c.map(l=>e.jsx(O,{report:l,onClick:()=>I(l)},l.id))}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Deployment Details"}),e.jsxs("button",{onClick:z,className:"text-gray-400 hover:text-gray-600 transition-colors",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(O,{report:g}),g.changes.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Resource Changes"}),e.jsx("div",{className:"space-y-2",children:g.changes.map((l,S)=>e.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-lg ${l.action==="create"?"bg-green-50":l.action==="update"?"bg-blue-50":l.action==="delete"?"bg-red-50":"bg-gray-50"}`,children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded ${l.action==="create"?"bg-green-100 text-green-800":l.action==="update"?"bg-blue-100 text-blue-800":l.action==="delete"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:l.action.toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:l.resource}),e.jsx("div",{className:"text-sm text-gray-500",children:l.resourceType}),l.details&&e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:l.details})]})]},S))})]}),g.terragruntOutput&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Terragrunt Output"}),e.jsx("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg text-sm overflow-x-auto",children:g.terragruntOutput})]})]})]})})})]})})}function me(){return e.jsx("div",{className:"App",children:e.jsx(xe,{})})}T(document.getElementById("root")).render(e.jsx(d.StrictMode,{children:e.jsx(me,{})}));
//# sourceMappingURL=index-BqpsgrIm.js.map
