version: 1
collect_usage_data: false
projects:
  - name: live
    dir: infra/live
    terragrunt: true
    workflow: terragrunt-runall
    include_patterns:
      - "infra/live/**"
workflows:
  terragrunt-runall:
    plan:
      steps:
        - run: terragrunt run-all plan -no-color -parallelism 4
    apply:
      steps:
        - run: terragrunt run-all apply -auto-approve -no-color -parallelism 2